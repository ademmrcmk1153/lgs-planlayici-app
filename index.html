<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LGS Ä°nteraktif HaftalÄ±k PlanlayÄ±cÄ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- SeÃ§ilen Palet: SÄ±cak NÃ¶traller (Stone, Amber, Emerald, Sky) -->
    <!-- Uygulama YapÄ±sÄ± PlanÄ±: Sekmeli tek sayfalÄ±k uygulama. KullanÄ±cÄ±lar bir gÃ¼nÃ¼n (Pazartesi, SalÄ± vb.) programÄ±nÄ± gÃ¶rmek iÃ§in tÄ±klarlar. Bu yapÄ±, fiziksel bir haftalÄ±k planlayÄ±cÄ±yÄ± taklit ederek sezgisel yapÄ±sÄ± nedeniyle seÃ§ilmiÅŸtir ve kullanÄ±cÄ±nÄ±n aynÄ± anda tek bir gÃ¼ne odaklanmasÄ±nÄ± saÄŸlayarak biliÅŸsel yÃ¼kÃ¼ azaltÄ±r. Her gÃ¶rev, bir onay kutusu aracÄ±lÄ±ÄŸÄ±yla tamamlandÄ± olarak iÅŸaretlenebilir, bu da anÄ±nda gÃ¶rsel geri bildirim ve ilerleme hissi saÄŸlar. -->
    <!-- GÃ¶rselleÅŸtirme ve Ä°Ã§erik SeÃ§imleri: Ana rapor bir programdÄ±r. AmaÃ§: GÃ¶revleri gÃ¶rÃ¼ntÃ¼lemek ve takip etmek. YÃ¶ntem: Tailwind CSS ile stilize edilmiÅŸ, her gÃ¼n iÃ§in yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir HTML listesi. EtkileÅŸim: GÃ¼n navigasyonu iÃ§in JS destekli sekmeler ve gÃ¶rev tamamlama iÃ§in onay kutularÄ±. TaranabilirliÄŸi artÄ±rmak iÃ§in Unicode karakterler (ğŸ“š, ğŸ€, ğŸ®) basit, hafif simgeler olarak kullanÄ±lÄ±r. Veri kalÄ±cÄ±lÄ±ÄŸÄ± tarayÄ±cÄ±nÄ±n yerel depolamasÄ± kullanÄ±larak eklenir. GerekÃ§e: Bu yaklaÅŸÄ±m, kullanÄ±cÄ±nÄ±n gereksiz karmaÅŸÄ±klÄ±k olmadan bir programÄ± takip etme ihtiyacÄ±nÄ± doÄŸrudan karÅŸÄ±lar. Herhangi bir grafik gerekli deÄŸildir. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
        }
        .task-item.completed {
            background-color: #dcfce7; /* emerald-100 */
        }
        .task-item.completed .task-text {
            text-decoration: line-through;
            color: #6b7280; /* gray-500 */
        }
        .day-tab.active {
            background-color: #0284c7; /* sky-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .day-tab {
            transition: all 0.2s ease-in-out;
        }
        .hidden {
            display: none;
        }
        /* Ã–zel modal stilleri */
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            max-width: 400px;
            text-align: center;
        }
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body class="text-stone-800">

    <div id="loading-spinner" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-white"></div>
    </div>

    <div id="message-box" class="fixed bottom-4 right-4 p-3 rounded-lg shadow-lg z-50 hidden"></div>

    <!-- Ã–zel Onay ModalÄ± -->
    <div id="confirmation-modal" class="modal hidden">
        <div class="modal-content">
            <p class="text-lg font-semibold mb-4" id="modal-message"></p>
            <div class="modal-buttons">
                <button id="modal-confirm-btn" class="bg-red-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">Onayla</button>
                <button id="modal-cancel-btn" class="bg-gray-400 text-white font-semibold px-4 py-2 rounded-lg hover:bg-gray-500 transition-colors">Ä°ptal</button>
            </div>
        </div>
    </div>

    <div id="welcome-screen" class="flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-blue-100 to-sky-200 p-4">
        <div class="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center">
            <h1 class="text-3xl font-bold text-sky-700 mb-6">LGS PlanlayÄ±cÄ±ya HoÅŸ Geldiniz!</h1>
            <p class="text-stone-600 mb-6">ProgramÄ±nÄ±zÄ± kiÅŸiselleÅŸtirmek ve kaydetmek iÃ§in lÃ¼tfen adÄ±nÄ±zÄ± ve soyadÄ±nÄ±zÄ± girin.</p>
            <div class="space-y-4">
                <input type="text" id="welcome-name" placeholder="AdÄ±nÄ±z" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">
                <input type="text" id="welcome-surname" placeholder="SoyadÄ±nÄ±z" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">
                <button id="save-name-btn" class="w-full bg-sky-600 text-white font-semibold py-3 rounded-lg hover:bg-sky-700 transition-colors shadow-md">Kaydet ve BaÅŸla</button>
            </div>
        </div>
    </div>

    <div id="main-app-screen" class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8 hidden">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-stone-900" id="user-name-display"></h1>
            <p class="mt-2 text-sm text-stone-600" id="user-id-display"></p>
            <p class="mt-4 text-md text-stone-700">7. SÄ±nÄ±ftan 8'e hazÄ±rlÄ±k yolculuÄŸun burada baÅŸlÄ±yor!</p>
        </header>

        <section class="bg-yellow-50 p-4 sm:p-6 rounded-xl shadow-inner mb-8 border border-yellow-200 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex-grow">
                <h3 class="text-lg font-semibold text-yellow-800 mb-2">Hafta SeÃ§imi ve Program YÃ¶netimi</h3>
                <p class="text-sm text-yellow-700">GÃ¶rÃ¼ntÃ¼lemek istediÄŸiniz haftayÄ± seÃ§in veya tÃ¼m program verilerinizi silin.</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-3">
                <select id="week-selector" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
                    <option value="0">Hafta 1</option>
                    <option value="1">Hafta 2</option>
                    <option value="2">Hafta 3</option>
                    <option value="3">Hafta 4</option>
                </select>
                <button id="delete-all-data-btn" class="bg-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-700 transition-colors shadow-md">TÃ¼m ProgramÄ± Sil</button>
            </div>
        </section>

        <nav id="day-navigation" class="flex flex-wrap justify-center gap-2 mb-8">
            <button data-day="pazartesi" class="day-tab active px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">Pazartesi</button>
            <button data-day="sali" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">SalÄ±</button>
            <button data-day="carsamba" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">Ã‡arÅŸamba</button>
            <button data-day="persembe" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">PerÅŸembe</button>
            <button data-day="cuma" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">Cuma</button>
            <button data-day="cumartesi" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">Cumartesi</button>
            <button data-day="pazar" class="day-tab px-4 py-2 text-sm font-semibold rounded-full bg-white shadow-sm hover:bg-stone-200">Pazar</button>
        </nav>

        <main id="schedule-container" class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg">
            
            <!-- JavaScript ile program iÃ§eriÄŸi buraya render edilecek -->

        </main>
        
        <footer class="mt-8 text-center text-sm text-stone-500 space-y-2">
            <p><strong>Ã–nemli Notlar:</strong> Bu program bir rehberdir, kendi Ã¶ÄŸrenme hÄ±zÄ±nÄ±za ve enerji seviyenize gÃ¶re ayarlamalar yapabilirsiniz. Sabit aktivite gÃ¼nlerinde (DYK, Basketbol) 300 soru hedefine ulaÅŸmak zor olabilir, bu yÃ¼zden daha dÃ¼ÅŸÃ¼k ama verimli hedefler belirlenmiÅŸtir.</p>
            <p><strong>Kitap Okuma:</strong> GÃ¼nde en az 30 dakika kitap okumayÄ± ihmal etmeyin. Bu, anlama becerinizi geliÅŸtirecektir.</p>
            <p><strong>YanlÄ±ÅŸ Analizi:</strong> Her yanlÄ±ÅŸ sorunuzu dikkatlice inceleyin ve neden yanlÄ±ÅŸ yaptÄ±ÄŸÄ±nÄ±zÄ± anlayÄ±n.</p>
        </footer>

    </div>

    <script type="module">
        // Firebase importlarÄ± kaldÄ±rÄ±ldÄ±
        // import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // import { getFirestore, doc, getDoc, setDoc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global deÄŸiÅŸkenler
        let userName = '';
        let userSurname = '';
        let currentWeekIndex = 0; // Åu anda gÃ¶rÃ¼ntÃ¼lenen hafta, varsayÄ±lan olarak 0 (1. Hafta)

        // Tek bir hafta iÃ§in temel program yapÄ±sÄ±
        const baseSchedule = {
            pazartesi: [
                { time: '08:00 - 13:00', subject: 'DYK Kursu', activity: 'ğŸ« DYK Dersleri', target: '-', completed: false },
                { time: '13:00 - 14:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '14:00 - 15:30', subject: 'Matematik', activity: 'ğŸ“š Konu TekrarÄ± & Soru', target: '70 Soru', completed: false },
                { time: '15:30 - 17:00', subject: 'Fen Bilimleri', activity: 'ğŸ”¬ Konu TekrarÄ± & Soru', target: '70 Soru', completed: false },
                { time: '17:00 - 17:30', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Paragraf Soru Ã‡Ã¶zÃ¼mÃ¼', target: '20 Soru', completed: false },
                { time: '17:30 - 18:00', subject: 'Din KÃ¼ltÃ¼rÃ¼', activity: 'ğŸ¤² Konu TekrarÄ± & Soru', target: '30 Soru', completed: false },
                { time: '18:00 - 18:30', subject: 'Ä°nkÄ±lap Tarihi', activity: 'ğŸ‡¹ğŸ‡· Konu TekrarÄ± & Soru', target: '20 Soru', completed: false },
                { time: '18:30 - 19:00', subject: 'Kitap Okuma', activity: 'ğŸ“– Kitap Okuma', target: '30 Dk', completed: false },
                { time: '19:00 - 19:30', subject: 'Ä°ngilizce', activity: 'ğŸ‡¬ğŸ‡§ Konu TekrarÄ± & Soru', target: '10 Soru', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸ§ YanlÄ±ÅŸ Analizi & Dinlenme', target: '-', completed: false },
            ],
            sali: [
                { time: '09:00 - 10:30', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '10:30 - 12:00', subject: 'Matematik', activity: 'ğŸ“š Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '12:00 - 13:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '13:00 - 13:30', subject: 'Kitap Okuma', activity: 'ğŸ“– Kitap Okuma', target: '30 Dk', completed: false },
                { time: '13:30 - 14:00', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Paragraf Soru Ã‡Ã¶zÃ¼mÃ¼', target: '20 Soru', completed: false },
                { time: '14:00 - 15:00', subject: 'Ä°ngilizce', activity: 'ğŸ‡¬ğŸ‡§ Konu TekrarÄ± & Soru', target: '40 Soru', completed: false },
                { time: '15:00 - 16:00', subject: 'Din KÃ¼ltÃ¼rÃ¼', activity: 'ğŸ¤² Konu TekrarÄ± & Soru', target: '40 Soru', completed: false },
                { time: '16:00 - 16:30', subject: 'Ä°nkÄ±lap Tarihi', activity: 'ğŸ‡¹ğŸ‡· Konu TekrarÄ± & Soru', target: '20 Soru', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸ§ YanlÄ±ÅŸ Analizi & Dinlenme', target: '-', completed: false },
            ],
            carsamba: [
                { time: '08:00 - 13:00', subject: 'DYK Kursu', activity: 'ğŸ« DYK Dersleri', target: '-', completed: false },
                { time: '13:00 - 14:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '14:00 - 14:30', subject: 'Kitap Okuma', activity: 'ğŸ“– Kitap Okuma', target: '30 Dk', completed: false },
                { time: '14:30 - 15:30', subject: 'Fen Bilimleri', activity: 'ğŸ”¬ Konu TekrarÄ± & Soru', target: '50 Soru', completed: false },
                { time: '15:30 - 16:30', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Konu TekrarÄ± & Soru', target: '50 Soru', completed: false },
                { time: '16:30 - 17:00', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Paragraf Soru Ã‡Ã¶zÃ¼mÃ¼', target: '20 Soru', completed: false },
                { time: '17:00 - 17:30', subject: 'Ä°nkÄ±lap Tarihi', activity: 'ğŸ‡¹ğŸ‡· Konu TekrarÄ± & Soru', target: '30 Soru', completed: false },
                { time: '17:30 - 19:00', subject: 'Basketbol Kursu', activity: 'ğŸ€ Basketbol AntrenmanÄ±', target: '-', completed: false },
                { time: '19:00 - 19:30', subject: 'Din KÃ¼ltÃ¼rÃ¼', activity: 'ğŸ¤² Konu TekrarÄ± & Soru', target: '30 Soru', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸ§ YanlÄ±ÅŸ Analizi & Dinlenme', target: '-', completed: false },
            ],
            persembe: [
                { time: '09:00 - 10:30', subject: 'Matematik', activity: 'ğŸ“š Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '10:30 - 12:00', subject: 'Fen Bilimleri', activity: 'ğŸ”¬ Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '12:00 - 13:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '13:00 - 13:30', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Paragraf Soru Ã‡Ã¶zÃ¼mÃ¼', target: '20 Soru', completed: false },
                { time: '13:30 - 15:00', subject: 'Matematik', activity: 'Soru Ã‡Ã¶zÃ¼mÃ¼ (FarklÄ± Konu/Genel Tekrar)', target: '30 Soru', completed: false },
                { time: '15:00 - 16:30', subject: 'Fen Bilimleri', activity: 'Soru Ã‡Ã¶zÃ¼mÃ¼ (FarklÄ± Konu/Genel Tekrar)', target: '30 Soru', completed: false },
                { time: '16:30 - 17:30', subject: 'Ä°ngilizce', activity: 'Kelime TekrarÄ± & Soru Ã‡Ã¶zÃ¼mÃ¼ (Ã–rn: Unit 2: Teen Life kelimeleri)', target: '40 Soru', completed: false },
                { time: '17:30 - 20:00', subject: 'Mola', activity: 'AkÅŸam YemeÄŸi & HazÄ±rlÄ±k', target: '-', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸ§ YanlÄ±ÅŸ Analizi & Dinlenme', target: '-', completed: false },
            ],
            cuma: [
                { time: '09:00 - 10:30', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '10:30 - 12:00', subject: 'Matematik', activity: 'ğŸ“š Konu TekrarÄ± & Soru', target: '80 Soru', completed: false },
                { time: '12:00 - 13:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '13:00 - 14:00', subject: 'Din KÃ¼ltÃ¼rÃ¼', activity: 'ğŸ¤² Konu TekrarÄ± & Soru', target: '40 Soru', completed: false },
                { time: '14:00 - 15:00', subject: 'Ä°nkÄ±lap Tarihi', activity: 'ğŸ‡¹ğŸ‡· Konu TekrarÄ± & Soru', target: '30 Soru', completed: false },
                { time: '15:00 - 15:30', subject: 'Mola', activity: 'KÄ±sa Dinlenme', target: '-', completed: false },
                { time: '15:30 - 17:00', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Soru Ã‡Ã¶zÃ¼mÃ¼ (FarklÄ± Konu/Genel Tekrar)', target: '30 Soru', completed: false },
                { time: '17:00 - 17:30', subject: 'Mola', activity: 'Basketbol Kursuna HazÄ±rlÄ±k', target: '-', completed: false },
                { time: '17:30 - 19:00', subject: 'Basketbol Kursu', activity: 'ğŸ€ Basketbol AntrenmanÄ±', target: '-', completed: false },
                { time: '19:00 - 20:00', subject: 'Mola', activity: 'AkÅŸam YemeÄŸi & HazÄ±rlÄ±k', target: '-', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸ§ YanlÄ±ÅŸ Analizi & Dinlenme', target: '-', completed: false },
            ],
            cumartesi: [
                { time: '08:00 - 13:00', subject: 'DYK Kursu', activity: 'ğŸ« DYK Dersleri', target: '-', completed: false },
                { time: '13:00 - 14:00', subject: 'Mola', activity: 'ğŸ¥ª Ã–ÄŸle YemeÄŸi & Dinlenme', target: '-', completed: false },
                { time: '14:00 - 15:00', subject: 'Genel Tekrar', activity: 'ğŸ” HaftanÄ±n Ã–nemli KonularÄ±na GÃ¶z At / KÄ±sa Notlar', target: '-', completed: false },
                { time: '15:00 - 16:00', subject: 'YanlÄ±ÅŸ Analizi', activity: 'ğŸ§ YanlÄ±ÅŸ Ã‡Ã¶zÃ¼len SorularÄ± Ä°ncele & Nedenlerini Anla', target: '-', completed: false },
                { time: '16:00 - 16:30', subject: 'Mola', activity: 'KÄ±sa Dinlenme', target: '-', completed: false },
                { time: '16:30 - 17:00', subject: 'TÃ¼rkÃ§e', activity: 'âœï¸ Paragraf Soru Ã‡Ã¶zÃ¼mÃ¼', target: '20 Soru', completed: false },
                { time: '17:00 - 20:00', subject: 'Serbest Zaman', activity: 'AkÅŸam YemeÄŸi & HazÄ±rlÄ±k', target: '-', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Dinlenme', activity: 'ğŸ˜´ HaftanÄ±n YorÄŸunluÄŸunu At', target: '-', completed: false },
            ],
            pazar: [
                { time: '09:00 - 09:30', subject: 'Kitap Okuma', activity: 'ğŸ“– Kitap Okuma', target: '30 Dk', completed: false },
                { time: '09:30 - 10:00', subject: 'Din KÃ¼ltÃ¼rÃ¼', activity: 'ğŸ¤² Konu TekrarÄ± & Soru', target: '20 Soru', completed: false },
                { time: '10:00 - 10:30', subject: 'Ä°ngilizce', activity: 'ğŸ‡¬ğŸ‡§ Konu TekrarÄ± & Soru', target: '10 Soru', completed: false },
                { time: '10:30 SonrasÄ±', subject: 'Dinlenme', activity: 'ğŸ§˜â€â™‚ï¸ Dinlenme & Sosyal Aktiviteler', target: '-', completed: false },
                { time: '20:00 - 22:00', subject: 'MaÃ§', activity: 'ğŸ® Sitede MaÃ§', target: '-', completed: false },
                { time: '22:00 SonrasÄ±', subject: 'Serbest Zaman', activity: 'ğŸš€ Yeni Haftaya Zihinsel HazÄ±rlÄ±k', target: '-', completed: false },
            ],
        };

        // 4 haftalÄ±k program verisini tutacak ana yapÄ±
        // Her hafta iÃ§in baseSchedule'Ä±n derin kopyasÄ±
        let lgsProgramData = []; 
        for (let i = 0; i < 4; i++) {
            lgsProgramData.push(JSON.parse(JSON.stringify(baseSchedule))); 
        }
        
        // Firebase ile ilgili global deÄŸiÅŸkenler kaldÄ±rÄ±ldÄ±
        // let db; 
        // let auth;
        // let userId = null;
        // let userName = '';
        // let userSurname = '';
        // let currentWeekIndex = 0; // Åu anda gÃ¶rÃ¼ntÃ¼lenen hafta, varsayÄ±lan olarak 0 (1. Hafta)

        document.addEventListener('DOMContentLoaded', async function () {
            const welcomeScreen = document.getElementById('welcome-screen');
            const mainAppScreen = document.getElementById('main-app-screen');
            const welcomeNameInput = document.getElementById('welcome-name');
            const welcomeSurnameInput = document.getElementById('welcome-surname');
            const saveNameButton = document.getElementById('save-name-btn');
            const userNameDisplay = document.getElementById('user-name-display');
            const userIdDisplay = document.getElementById('user-id-display');
            const messageBox = document.getElementById('message-box');
            const loadingSpinner = document.getElementById('loading-spinner');
            const navContainer = document.getElementById('day-navigation'); 
            const scheduleContainer = document.getElementById('schedule-container'); 
            const weekSelector = document.getElementById('week-selector');
            const deleteAllDataBtn = document.getElementById('delete-all-data-btn');
            const confirmationModal = document.getElementById('confirmation-modal');
            const modalMessage = document.getElementById('modal-message');
            const modalConfirmBtn = document.getElementById('modal-confirm-btn');
            const modalCancelBtn = document.getElementById('modal-cancel-btn');

            // BaÅŸlangÄ±Ã§ta hoÅŸ geldin ekranÄ±nÄ± gÃ¶ster
            welcomeScreen.classList.remove('hidden');
            mainAppScreen.classList.add('hidden'); 

            function showLoading() {
                loadingSpinner.classList.remove('hidden');
            }

            function hideLoading() {
                loadingSpinner.classList.add('hidden');
            }

            function displayMessage(message, type = 'info') {
                messageBox.textContent = message;
                messageBox.classList.remove('hidden', 'translate-y-full', 'bg-red-500', 'bg-green-500', 'bg-blue-500', 'text-white');
                messageBox.classList.add('translate-y-0'); 

                if (type === 'error') {
                    messageBox.classList.add('bg-red-500', 'text-white');
                } else if (type === 'success') {
                    messageBox.classList.add('bg-green-500', 'text-white');
                } else {
                    messageBox.classList.add('bg-blue-500', 'text-white');
                }
                
                setTimeout(() => {
                    messageBox.classList.add('translate-y-full'); 
                    setTimeout(() => messageBox.classList.add('hidden'), 300); 
                }, 3000);
            }

            // Ã–zel Onay ModalÄ± FonksiyonlarÄ±
            function showConfirmationModal(message) {
                modalMessage.textContent = message;
                confirmationModal.classList.remove('hidden');
                return new Promise((resolve) => {
                    modalConfirmBtn.onclick = () => {
                        hideConfirmationModal();
                        resolve(true);
                    };
                    modalCancelBtn.onclick = () => {
                        hideConfirmationModal();
                        resolve(false);
                    };
                });
            }

            // Local Storage iÃ§in anahtar oluÅŸtur
            function getLocalStorageKey(name, surname) {
                return `lgsPlanner_${name.toLowerCase()}_${surname.toLowerCase()}`;
            }

            // TÃ¼m programÄ± yerel depolamaya kaydet
            async function saveLocalProgram() {
                showLoading();
                try {
                    const key = getLocalStorageKey(userName, userSurname);
                    const dataToSave = {
                        name: userName,
                        surname: userSurname,
                        schedule: lgsProgramData // 4 haftalÄ±k programÄ±n tamamÄ±nÄ± kaydet
                    };
                    localStorage.setItem(key, JSON.stringify(dataToSave));
                    displayMessage('Program yerel olarak kaydedildi!', 'success');
                } catch (error) {
                    displayMessage(`Kaydetme hatasÄ±: ${error.message}`, 'error');
                    console.error('Local save error:', error);
                } finally {
                    hideLoading();
                }
            }

            // ProgramÄ± yerel depolamadan yÃ¼kle
            async function loadLocalProgram() {
                showLoading();
                try {
                    const key = getLocalStorageKey(userName, userSurname);
                    const savedData = localStorage.getItem(key);
                    if (savedData) {
                        const parsedData = JSON.parse(savedData);
                        // YÃ¼klenen verinin 4 haftalÄ±k yapÄ±da olduÄŸunu kontrol et
                        if (Array.isArray(parsedData.schedule) && parsedData.schedule.length === 4) {
                            lgsProgramData = parsedData.schedule;
                            // YÃ¼klenen veride completed durumu yoksa baseSchedule'dan al
                            lgsProgramData.forEach(week => {
                                for (const day in week) {
                                    week[day].forEach(task => {
                                        if (typeof task.completed === 'undefined') {
                                            task.completed = false;
                                        }
                                    });
                                }
                            });
                            displayMessage('Program yerel olarak yÃ¼klendi!', 'success');
                            return true;
                        } else {
                            // YapÄ± uyuÅŸmuyorsa sÄ±fÄ±rla
                            lgsProgramData = [];
                            for (let i = 0; i < 4; i++) {
                                lgsProgramData.push(JSON.parse(JSON.stringify(baseSchedule)));
                            }
                            displayMessage('YÃ¼klÃ¼ program yapÄ±sÄ± uyumsuz, yeni program oluÅŸturuldu.', 'info');
                            await saveLocalProgram(); // Yeni oluÅŸturulan programÄ± kaydet
                            return false;
                        }
                    }
                } catch (error) {
                    displayMessage(`Program yÃ¼kleme hatasÄ±: ${error.message}`, 'error');
                    console.error('Local load error:', error);
                } finally {
                    hideLoading();
                }
                return false;
            }

            async function updateTaskCompletion(dayId, taskIndex, completedStatus) {
                showLoading();
                try {
                    // Mevcut haftadaki belirli gÃ¶revi gÃ¼ncelle
                    lgsProgramData[currentWeekIndex][dayId][taskIndex].completed = completedStatus;
                    await saveLocalProgram(); // TÃ¼m 4 haftalÄ±k programÄ± kaydet
                    displayMessage('GÃ¶rev durumu gÃ¼ncellendi!', 'success');
                } catch (error) {
                    displayMessage(`GÃ¼ncelleme hatasÄ±: ${error.message}`, 'error');
                    console.error('Update task error:', error);
                } finally {
                    hideLoading();
                }
            }

            async function deleteAllProgramData() {
                const confirmed = await showConfirmationModal("TÃ¼m program verilerinizi silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz.");
                if (confirmed) {
                    showLoading();
                    try {
                        const key = getLocalStorageKey(userName, userSurname);
                        localStorage.removeItem(key); // Local Storage'dan sil
                        
                        // ProgramÄ± sÄ±fÄ±rla
                        lgsProgramData = [];
                        for (let i = 0; i < 4; i++) {
                            lgsProgramData.push(JSON.parse(JSON.stringify(baseSchedule)));
                        }
                        displayMessage('TÃ¼m program verileri baÅŸarÄ±yla silindi ve sÄ±fÄ±rlandÄ±!', 'success');
                        renderSchedule(); // SÄ±fÄ±rlanmÄ±ÅŸ programÄ± tekrar render et
                    } catch (error) {
                        displayMessage(`Veri silme hatasÄ±: ${error.message}`, 'error');
                        console.error('Delete data error:', error);
                    } finally {
                        hideLoading();
                    }
                }
            }


            function renderSchedule() {
                const scheduleContainer = document.getElementById('schedule-container'); 
                scheduleContainer.innerHTML = ''; 

                // Sadece mevcut haftanÄ±n programÄ±nÄ± render et
                const currentWeekSchedule = lgsProgramData[currentWeekIndex];

                for (const day in currentWeekSchedule) {
                    const dayContentDiv = document.createElement('div');
                    dayContentDiv.id = day;
                    dayContentDiv.classList.add('day-content', 'hidden'); 

                    let dayDisplayName = '';
                    let daySummary = '';
                    switch (day) {
                        case 'pazartesi': dayDisplayName = 'Pazartesi'; daySummary = '(DYK & MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 220 Soru)'; break;
                        case 'sali': dayDisplayName = 'SalÄ±'; daySummary = '(MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 280 Soru)'; break;
                        case 'carsamba': dayDisplayName = 'Ã‡arÅŸamba'; daySummary = '(DYK, Basketbol & MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 180 Soru)'; break;
                        case 'persembe': dayDisplayName = 'PerÅŸembe'; daySummary = '(MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 280 Soru)'; break;
                        case 'cuma': dayDisplayName = 'Cuma'; daySummary = '(Basketbol & MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 270 Soru)'; break;
                        case 'cumartesi': dayDisplayName = 'Cumartesi'; daySummary = '(DYK & MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 20 Soru)'; break;
                        case 'pazar': dayDisplayName = 'Pazar'; daySummary = '(Hafif YoÄŸunlaÅŸtÄ±rÄ±lmÄ±ÅŸ Dinlenme & MaÃ§ GÃ¼nÃ¼ - YaklaÅŸÄ±k 30 Soru)'; break;
                    }
                    dayContentDiv.innerHTML = `<h2 class="text-2xl font-bold mb-4 border-b pb-2">${dayDisplayName} <span class="text-base font-normal text-stone-500">${daySummary}</span></h2><ul class="space-y-3 task-list"></ul>`;
                    
                    const taskList = dayContentDiv.querySelector('.task-list');
                    currentWeekSchedule[day].forEach((task, index) => { // currentWeekSchedule'Ä± kullan
                        const listItem = document.createElement('li');
                        listItem.classList.add('task-item', 'flex', 'items-center', 'p-3', 'rounded-lg', 'bg-stone-50');
                        if (task.completed) {
                            listItem.classList.add('completed');
                        }
                        listItem.innerHTML = `
                            <input type="checkbox" class="mr-4 h-5 w-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500" ${task.completed ? 'checked' : ''}>
                            <span class="flex-grow">
                                <span class="font-semibold text-stone-500 mr-2">${task.time}</span> 
                                <span class="task-text">${task.subject}: ${task.activity}</span>
                            </span>
                            ${task.target !== '-' ? `<span class="ml-auto text-sm font-semibold text-sky-700 bg-sky-100 px-2 py-1 rounded-md">ğŸ¯ ${task.target.replace('Soru', 'Soru').replace('Dk', 'Dk')}</span>` : ''}
                        `;
                        
                        const checkbox = listItem.querySelector('input[type="checkbox"]');
                        checkbox.addEventListener('change', function(e) {
                            updateTaskCompletion(day, index, e.target.checked);
                            e.target.closest('.task-item').classList.toggle('completed', e.target.checked);
                        });
                        taskList.appendChild(listItem);
                    });
                    scheduleContainer.appendChild(dayContentDiv);
                }
                const firstDayTab = document.querySelector('.day-tab');
                if (firstDayTab) {
                    firstDayTab.click(); 
                }
            }

            saveNameButton.addEventListener('click', async function() {
                userName = welcomeNameInput.value.trim();
                userSurname = welcomeSurnameInput.value.trim();

                if (userName && userSurname) {
                    const loaded = await loadLocalProgram(); // ProgramÄ± yÃ¼kle
                    if (!loaded) {
                        // EÄŸer kaydedilmiÅŸ bir program yoksa, varsayÄ±lan 4 haftalÄ±k programÄ± kullan ve kaydet
                        lgsProgramData = [];
                        for (let i = 0; i < 4; i++) {
                            lgsProgramData.push(JSON.parse(JSON.stringify(baseSchedule)));
                        }
                        await saveLocalProgram();
                    }
                    showMainApp(); // Ana uygulamayÄ± gÃ¶ster
                } else {
                    displayMessage('LÃ¼tfen adÄ±nÄ±zÄ± ve soyadÄ±nÄ±zÄ± girin.', 'error');
                }
            });

            weekSelector.addEventListener('change', function() {
                currentWeekIndex = parseInt(this.value);
                renderSchedule(); // SeÃ§ilen haftayÄ± render et
            });

            deleteAllDataBtn.addEventListener('click', deleteAllProgramData);

            navContainer.addEventListener('click', function(e) {
                if (e.target.tagName === 'BUTTON') {
                    const targetDay = e.target.dataset.day;

                    navContainer.querySelectorAll('.day-tab').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    e.target.classList.add('active');

                    scheduleContainer.querySelectorAll('.day-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    
                    document.getElementById(targetDay).classList.remove('hidden');
                }
            });

            function showMainApp() {
                welcomeScreen.classList.add('hidden');
                mainAppScreen.classList.remove('hidden');
                userNameDisplay.textContent = `HoÅŸ Geldiniz, ${userName} ${userSurname}!`;
                userIdDisplay.textContent = `Bu sizin kiÅŸisel planlayÄ±cÄ±nÄ±z.`; // Sabit metin
                renderSchedule();
            }
        });
    </script>
</body>
</html>
